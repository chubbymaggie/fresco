These are instructions for the configuration, building, and installation
of the Berlin windowing system.

Prerequisites
=============

Berlin uses a number of third party libraries, which you will need to
have installed before you can proceed. Please see at

http://www.berlin-consortium.org/dependencies.html

for a complete list. Unfortunately, quite a number of them are still
in heavy development, so you may need to get the sources and compile
them yourself. Respective rpm and deb packages may *not* be enough !

Downloading
===========

There are currently three ways to download berlin. You can check out the
sources directly from cvs, in which case you find instructions at

http://www.berlin-consortium.org/cvs.html

or you can download a nightly snapshot from

ftp://berlin.sourceforge.net/pub/berlin/

or you can get release packages at

http://sourceforge.net/projects/berlin/

Configuration
=============

In case you use the cvs version, you have to step into the toplevel
directory ('Berlin'), and call ./autogen.sh, to generate configure
scripts and helper files.

We have seen problems with autoconf 2.50 and later. For now you must
use autoconf 2.13 to build berlin.

Decide where to build berlin, either inside the source tree (let's
refer to this as $berlin-src), or (the recomended way), in a separate 
build directory ($berlin-build).
Step into the build directory, and run configure:

> cd $berlin-build
> $berlin-src/configure

this will set up the build tree and check for the available packages.
Here is a list of the available options:

  --enable-docs          Build the documentation
  --enable-tracer        Compile with tracer support
  --with-omniorb-prefix  Prefix for omniORB
  --with-omniorb-version omniORB version (3 and 4 supported)
  --with-freetype-prefix Prefix where freetype is installed (optional)
  --with-console         Specify which Console to use (GGI, SDL, DirectFB)
  --with-ggi-prefix      Prefix for GGI
  --with-sdl-prefix      Prefix where SDL is installed (optional)
  --with-directfb-prefix Prefix for DirectFb (console DirectFB)
  --with-art-prefix=PFX  Prefix for libArt
  --with-ggimesa-prefix  Prefix for GGIMesa
  --with-mesa-prefix     Prefix for Mesa
  --enable-jprof   	 enable profiling with the jprof tool
  --enable-lclog   	 enable lifecycle logging

[ Add support for interactive configuration and document the options
  here]

Building
========

Run make. As make produces a lot of noise, you may want to suppress
that, i.e. run make 'silently'. It still prints out what it is doing,
so you can keep track of things:

> make -s

Testing
=======

you should now find some libraries in $berlin-build/lib, modules in
$berlin-build/module, and binaries in $berlin-build/bin. If you want
to run berlin at this place, you have to tell the loader where to look
for the libraries, and, in case you use the python environment, tell
python where to find the berlin modules:

> setenv LD_LIBRARY_PATH $berlin-build/lib:$LD_LIBRARY_PATH
> setenv PYTHONPATH $berlin-build/lib/python:$PYTHONPATH
> setenv BABYLON_PATH $berlin-build/modules/Babylon

or similar depending on your shell.
The berlin server is in $berlin-build/bin/server, and to tell him about
the current (temporary) location of the resources (fonts, modules, rasters, ...)
you have to provide him with a resource file containing the paths:

> bin/server -r config/berlinrc

Voila ! That should run the server.

other options that you may use when invoking the server:

-l --logger [list of groups to log]: log messages (the special group 'lifecycle' requires configuration with --enable-lclog)
-t --tracer :                        trace method calls (requires configuration with --enable-tracer)
-p --profiler :                      use jprof profiler (requires configuration with --enable-jprof)

Installing
==========

Sorry, the install target isn't finished yet, we are working on it.

Troubleshooting
===============

There are a couple of places which are frequently subject to problems.
Please consult the FAQ at

http://www2/berlin-consortium.org/wiki/html/Berlin/FAQ.htm

please be sure that third party libraries are correctly installed before
you post about a bug. For example, the by far most frequent problem encountered
is reported by people who forgot to start the name server...

Good luck,
		Stefan <stefan@berlin-consortium.org>
